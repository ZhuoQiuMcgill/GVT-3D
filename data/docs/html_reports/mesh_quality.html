<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>六面体网格质量交互指南</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Visualization & Content Choices:
        - Introduction: Text. Goal: Orient. Method: HTML/Tailwind.
        - Core Metrics: Cards for each metric (text + Unicode icon), click to show details. Chart.js horizontal bar for visual quality scale (ideal, good, acceptable, poor). Goal: Explain, Compare. Interaction: Click, Hover.
        - Quality Benchmarks (Table 3.1): Chart.js grouped bar charts (Ideal, FEA, CFD ranges) for key metrics like Aspect Ratio, Skewness, Scaled Jacobian, Orthogonal Quality. Goal: Compare, Inform. Interaction: Hover.
        - Software Standards (Table 4.1): Dropdown to select software, displays text info. Goal: Inform. Interaction: Select.
        - Impact & Best Practices: Accordions with text. Goal: Inform, Guide. Interaction: Click to expand.
        - Conclusion: Text. Goal: Summarize. Method: HTML/Tailwind.
        - Libraries: Chart.js for all charts (Canvas). Tailwind for layout/styling.
        - CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body { font-family: 'Inter', sans-serif; }
        .tab-button { transition: background-color 0.3s ease, color 0.3s ease; }
        .tab-button.active { background-color: #0369a1; color: #f0f9ff; }
        .tab-button:not(.active):hover { background-color: #e0f2fe; }
        .content-section { display: none; }
        .content-section.active { display: block; }
        .metric-card { cursor: pointer; transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out; }
        .metric-card:hover { transform: translateY(-5px); box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1), 0 4px 6px -2px rgba(0,0,0,0.05); }
        .accordion-content { max-height: 0; overflow: hidden; transition: max-height 0.3s ease-out; }
        .chart-container { position: relative; width: 100%; max-width: 600px; margin-left: auto; margin-right: auto; height: 300px; max-height: 400px; }
        @media (min-width: 768px) { .chart-container { height: 350px; } }
        h2 { font-size: 1.75rem; font-weight: 600; margin-bottom: 1rem; color: #1f2937; }
        h3 { font-size: 1.25rem; font-weight: 600; margin-bottom: 0.75rem; color: #374151; }
        .unicode-icon { font-size: 1.5rem; margin-right: 0.5rem; }
    </style>
</head>
<body class="bg-stone-100 text-neutral-800 antialiased">
    <div class="container mx-auto p-4 sm:p-6 lg:p-8">
        <header class="text-center mb-8">
            <h1 class="text-3xl sm:text-4xl font-bold text-sky-800">六面体网格质量交互指南</h1>
            <p class="text-neutral-600 mt-2">探索工业仿真中六面体网格质量的关键概念与实践</p>
        </header>

        <nav class="mb-8 bg-white rounded-lg shadow p-2 flex flex-wrap justify-center gap-2">
            <button class="tab-button active text-sm sm:text-base px-3 py-2 sm:px-4 sm:py-2.5 rounded-md font-medium text-neutral-700" onclick="showTab('intro')"><span class="unicode-icon">🏠</span>简介</button>
            <button class="tab-button text-sm sm:text-base px-3 py-2 sm:px-4 sm:py-2.5 rounded-md font-medium text-neutral-700" onclick="showTab('metrics')"><span class="unicode-icon">📊</span>核心度量</button>
            <button class="tab-button text-sm sm:text-base px-3 py-2 sm:px-4 sm:py-2.5 rounded-md font-medium text-neutral-700" onclick="showTab('benchmarks')"><span class="unicode-icon">🎯</span>质量基准</button>
            <button class="tab-button text-sm sm:text-base px-3 py-2 sm:px-4 sm:py-2.5 rounded-md font-medium text-neutral-700" onclick="showTab('software')"><span class="unicode-icon">💻</span>软件标准</button>
            <button class="tab-button text-sm sm:text-base px-3 py-2 sm:px-4 sm:py-2.5 rounded-md font-medium text-neutral-700" onclick="showTab('impact')"><span class="unicode-icon">✅</span>影响与实践</button>
            <button class="tab-button text-sm sm:text-base px-3 py-2 sm:px-4 sm:py-2.5 rounded-md font-medium text-neutral-700" onclick="showTab('conclusion')"><span class="unicode-icon">💡</span>结论与展望</button>
        </nav>

        <main class="bg-white rounded-lg shadow p-6 sm:p-8">
            <section id="intro" class="content-section active">
                <h2>欢迎来到六面体网格质量交互指南</h2>
                <p class="mb-4 text-neutral-700">本应用旨在帮助您理解和探索工业仿真中六面体网格质量的关键概念、度量标准、行业基准以及最佳实践。通过交互式图表和清晰的解释，您可以深入了解如何评估和提升网格质量，从而确保仿真结果的准确性和可靠性。</p>
                <p class="mb-4 text-neutral-700">在有限元分析 (FEA) 和计算流体动力学 (CFD) 等数值模拟领域，六面体（“hex”）单元因其卓越的性能而被广泛应用。它们通常能以更少的单元数量获得更高的精度，具有更好的收敛特性。然而，为复杂几何体生成高质量的全六面体网格是一项重大挑战，这构成了所谓的“六面体悖论”。</p>
                <p class="text-neutral-700">网格质量直接影响仿真的准确性、收敛速度和计算成本。劣质网格可能导致错误的预测和不稳定的求解过程。因此，理解和控制网格质量对于任何依赖仿真的工程任务都至关重要。</p>
            </section>

            <section id="metrics" class="content-section">
                <h2>核心度量标准</h2>
                <p class="mb-6 text-neutral-700">本节详细介绍了评估六面体单元几何质量的核心度量标准。理解这些度量是建立有效质量控制的第一步。您将了解每个度量的定义、理想值以及它们如何指示网格的健康状况。点击下方的卡片查看详情。</p>
                <div id="metricsContainer" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                </div>
                <div id="metricDetailModal" class="fixed inset-0 bg-gray-800 bg-opacity-75 flex items-center justify-center p-4 hidden z-50">
                    <div class="bg-white rounded-lg shadow-xl p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto">
                        <div class="flex justify-between items-center mb-4">
                            <h3 id="modalTitle" class="text-2xl font-semibold text-sky-700"></h3>
                            <button onclick="closeModal()" class="text-neutral-500 hover:text-neutral-700 text-2xl">&times;</button>
                        </div>
                        <div id="modalContent" class="text-neutral-700 space-y-3"></div>
                        <div class="mt-4 chart-container h-[250px] sm:h-[300px]">
                             <canvas id="metricQualityChart"></canvas>
                        </div>
                    </div>
                </div>
            </section>

            <section id="benchmarks" class="content-section">
                <h2>质量基准</h2>
                <p class="mb-6 text-neutral-700">了解了核心度量后，本节将探讨行业公认的质量阈值。这些基准为评估网格是否适合特定分析类型提供了指导。图表展示了部分关键度量在通用FEA和CFD应用中的理想值与可接受范围。请注意，这些范围可能因具体应用和求解器而异。</p>
                <div class="mb-4">
                    <label for="benchmarkMetricSelect" class="block text-sm font-medium text-neutral-700 mb-1">选择度量标准查看图表:</label>
                    <select id="benchmarkMetricSelect" class="block w-full max-w-xs p-2 border border-stone-300 rounded-md shadow-sm focus:ring-sky-500 focus:border-sky-500">
                        <option value="aspectRatio">长宽比 (Aspect Ratio)</option>
                        <option value="skewness">偏斜度 (Skewness, 0=理想)</option>
                        <option value="scaledJacobian">缩放雅可比 (Scaled Jacobian)</option>
                        <option value="orthogonalQuality">正交质量 (Orthogonal Quality, 1=理想)</option>
                    </select>
                </div>
                <div class="chart-container">
                    <canvas id="benchmarkChart"></canvas>
                </div>
            </section>

            <section id="software" class="content-section">
                <h2>软件特定标准</h2>
                <p class="mb-6 text-neutral-700">不同的仿真软件包可能采用略有不同的方式来定义和评估网格质量。本节概述了主流 FEA/CFD 软件中六面体网格质量的关键度量和建议阈值，帮助您根据所用工具进行调整。</p>
                <div class="mb-4">
                    <label for="softwareSelect" class="block text-sm font-medium text-neutral-700 mb-1">选择软件查看其标准:</label>
                    <select id="softwareSelect" class="block w-full max-w-md p-2 border border-stone-300 rounded-md shadow-sm focus:ring-sky-500 focus:border-sky-500">
                        <option value="">-- 请选择软件 --</option>
                        <option value="ansys">ANSYS (通用)</option>
                        <option value="abaqus">Abaqus</option>
                        <option value="comsol">COMSOL</option>
                        <option value="hypermesh">Altair HyperMesh</option>
                        <option value="cubit">Cubit (Sandia)</option>
                    </select>
                </div>
                <div id="softwareInfo" class="p-4 border border-stone-200 rounded-md bg-stone-50 min-h-[200px] text-neutral-700">
                    <p>请从上方选择一个软件以查看其相关的六面体网格质量建议。</p>
                </div>
            </section>

            <section id="impact" class="content-section">
                <h2>影响与最佳实践</h2>
                <p class="mb-6 text-neutral-700">网格质量直接影响仿真的保真度和效率。本节将阐述劣质网格的潜在后果，并提供生成和优化高质量六面体网格的最佳实践，帮助您克服常见挑战。</p>
                <div id="impactAccordions" class="space-y-3">
                </div>
            </section>

            <section id="conclusion" class="content-section">
                <h2>结论与展望</h2>
                <p class="mb-4 text-neutral-700">本指南总结了工业仿真中六面体网格质量的核心要素。六面体网格因其在精度和效率方面的优势，在工业仿真中扮演着至关重要的角色，其质量直接影响仿真结果的可靠性。核心质量度量标准，如长宽比、偏斜度、雅可比/缩放雅可比、正交性和翘曲度，均有其理想值和普遍接受的目标范围，但这些范围会因分析类型、所用软件和具体应用场景而有所不同。</p>
                <p class="mb-4 text-neutral-700">实现高质量的六面体网格通常是一个迭代过程，涉及细致的几何准备、策略性的网格划分方法选择以及后续的质量优化步骤。通过实施稳健的评估流程和采纳最佳实践，您可以显著提升仿真工作的可靠性和价值。</p>
                <h3 class="mt-6 mb-3">战略建议:</h3>
                <ul class="list-disc list-inside space-y-2 text-neutral-700">
                    <li>根据常见的分析类型、求解器敏感性和所需的精度水平，并参考行业和软件建议，制定公司特定或项目特定的网格质量指南。</li>
                    <li>在整个网格划分过程中执行网格质量检查，而不仅仅是在结束时。这有助于及早发现和纠正问题。</li>
                    <li>对关键分析强制进行网格收敛性研究，确保重要项目的关键仿真结果明显独立于网格密度和质量。</li>
                    <li>为工程师提供必要的网格划分原理、质量度量和软件工具知识。</li>
                    <li>促进设计 (CAD) 和分析 (CAE) 团队之间的沟通，以促进创建适合仿真的几何形状。</li>
                    <li>随着该领域的不断发展，随时了解网格划分技术、软件功能和质量度量方面的新进展。</li>
                </ul>
                 <p class="mt-6 text-neutral-700">同时，网格划分技术仍在不断发展，对标准、培训和验证的需求表明网格质量是更广泛的“仿真治理”框架的一个组成部分。未来自动化网格划分算法将越来越“感知”并在其整个过程中受到质量度量的驱动，持续关注新技术将使您受益。</p>
            </section>
        </main>

        <footer class="text-center mt-12 py-4 border-t border-stone-300">
            <p class="text-sm text-neutral-500">&copy; <span id="currentYear"></span> 六面体网格质量交互指南。内容基于提供的研究报告。</p>
        </footer>
    </div>

<script>
    document.getElementById('currentYear').textContent = new Date().getFullYear();

    const tabs = ['intro', 'metrics', 'benchmarks', 'software', 'impact', 'conclusion'];
    const tabButtons = document.querySelectorAll('.tab-button');
    const contentSections = document.querySelectorAll('.content-section');
    let currentBenchmarkChart = null;
    let currentMetricQualityChart = null;

    function showTab(tabId) {
        contentSections.forEach(section => {
            section.classList.remove('active');
        });
        tabButtons.forEach(button => {
            button.classList.remove('active');
        });

        document.getElementById(tabId).classList.add('active');
        document.querySelector(`.tab-button[onclick="showTab('${tabId}')"]`).classList.add('active');
        
        if (tabId === 'benchmarks') {
            renderBenchmarkChart(document.getElementById('benchmarkMetricSelect').value);
        }
    }

    // Core Metrics Data & Modal
    const metricsData = [
        { 
            id: 'aspectRatio', name: '长宽比 (Aspect Ratio)', icon: '📏',
            definition: '衡量单元的“拉伸”或“细长”程度。通常是其最长边与最短边之比。',
            idealValue: '1 (对于完美的立方体)',
            interpretation: '高长宽比表示单元被拉长或压扁。过高的比率会导致数值不准确，尤其是在应力和应变计算中。但在特定区域（如CFD边界层）可能有意使用。',
            ranges: { ideal: 1, goodMin: 1, goodMax: 5, acceptableMax: 10, poorMin: 10.01 }
        },
        { 
            id: 'skewness', name: '偏斜度 (Skewness)', icon: '📐',
            definition: '衡量单元偏离其理想形状（等角）的程度。可以根据单元中心边之间夹角或与理想角度（如90°）的比较来定义。',
            idealValue: '0 (完美的等角性，部分软件定义1为最佳)',
            interpretation: '高偏斜度表示单元扭曲，会导致插值误差、梯度计算不准确和求解精度降低，对CFD尤其不利。',
            ranges: { ideal: 0, goodMin: 0, goodMax: 0.5, acceptableMax: 0.85, poorMin: 0.851 } // 0 is best
        },
        { 
            id: 'jacobian', name: '雅可比 (Jacobian / Scaled Jacobian)', icon: '🧊',
            definition: '衡量从参数空间理想单元到物理空间实际单元的映射质量。缩放雅可比是其归一化版本 (通常0到1或-1到1)。',
            idealValue: '1 (对于未扭曲单元)',
            interpretation: '低的雅可比或缩放雅可比值（接近0或负值）表示严重的扭曲或单元反转（负值），会导致求解器失败或结果高度不准确。正值至关重要。',
            ranges: { ideal: 1, goodMin: 0.6, goodMax: 1, acceptableMin: 0.2, acceptableMax: 0.59, poorMax: 0.19 } // Scaled Jacobian 0-1
        },
        { 
            id: 'warpage', name: '翘曲度 (Warpage)', icon: '🌐',
            definition: '衡量六面体的四边形面偏离平面的程度。翘曲面的节点不在同一平面内。',
            idealValue: '0 (完全平坦的面)',
            interpretation: '主要影响壳单元，但也用于检查三维单元的面。高翘曲度会导致应力插值不准确。通常以度为单位。',
            ranges: { ideal: 0, goodMin: 0, goodMax: 5, acceptableMax: 15, poorMin: 15.01 } // degrees
        },
        { 
            id: 'orthogonality', name: '正交质量 (Orthogonal Quality)', icon: '➕',
            definition: '评估单元面与连接相邻单元形心的线的垂直程度，或单元边彼此之间或与边界的垂直程度。',
            idealValue: '1 (完美的正交性，部分软件定义0为最佳)',
            interpretation: '差的正交性（值接近0，如果1为最佳）会导致数值不准确，尤其是在CFD中具有尖锐梯度或复杂流路的区域。',
            ranges: { ideal: 1, goodMin: 0.7, goodMax: 1, acceptableMin: 0.1, acceptableMax: 0.69, poorMax: 0.09 } // 1 is best
        }
    ];

    const metricsContainer = document.getElementById('metricsContainer');
    metricsData.forEach(metric => {
        const card = document.createElement('div');
        card.className = 'metric-card bg-sky-50 p-6 rounded-lg shadow hover:shadow-lg border border-sky-200';
        card.innerHTML = `<h3 class="text-xl font-semibold text-sky-700 mb-2 flex items-center"><span class="unicode-icon">${metric.icon}</span>${metric.name}</h3><p class="text-neutral-600 text-sm">${metric.definition.substring(0,100)}...</p>`;
        card.onclick = () => openModal(metric);
        metricsContainer.appendChild(card);
    });

    const modal = document.getElementById('metricDetailModal');
    const modalTitle = document.getElementById('modalTitle');
    const modalContent = document.getElementById('modalContent');

    function openModal(metric) {
        modalTitle.innerHTML = `<span class="unicode-icon">${metric.icon}</span>${metric.name}`;
        modalContent.innerHTML = `
            <p><strong>定义:</strong> ${metric.definition}</p>
            <p><strong>理想值:</strong> ${metric.idealValue}</p>
            <p><strong>解读:</strong> ${metric.interpretation}</p>
        `;
        renderMetricQualityChart(metric);
        modal.classList.remove('hidden');
    }

    function closeModal() {
        modal.classList.add('hidden');
        if (currentMetricQualityChart) {
            currentMetricQualityChart.destroy();
            currentMetricQualityChart = null;
        }
    }
    
    function renderMetricQualityChart(metric) {
        const ctx = document.getElementById('metricQualityChart').getContext('2d');
        if (currentMetricQualityChart) {
            currentMetricQualityChart.destroy();
        }

        let labels, dataValues, backgroundColors;
        const r = metric.ranges;

        if (metric.id === 'aspectRatio' || metric.id === 'skewness' || metric.id === 'warpage') { // Higher is worse (after ideal)
            labels = ['理想', '良好', '可接受', '差'];
            dataValues = [r.ideal, r.goodMax, r.acceptableMax, r.poorMin]; // Representing thresholds
            backgroundColors = ['#4ade80', '#facc15', '#fb923c', '#f87171'];
             if (metric.id === 'skewness') { // 0 is ideal
                dataValues = [r.ideal, r.goodMax, r.acceptableMax, r.poorMin];
             }
        } else { // Higher is better (Jacobian, Orthogonality)
            labels = ['差', '可接受', '良好', '理想'];
            dataValues = [r.poorMax, r.acceptableMax, r.goodMax, r.ideal];
            backgroundColors = ['#f87171', '#fb923c', '#facc15', '#4ade80'];
        }
        
        let chartTitle = `${metric.name} 质量范围`;
        if (metric.id === 'warpage') chartTitle += ' (度)';
        if (metric.id === 'skewness' && metric.idealValue.includes("0")) chartTitle += ' (0=理想)';
        if (metric.id === 'orthogonality' && metric.idealValue.includes("1")) chartTitle += ' (1=理想)';


        currentMetricQualityChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: labels,
                datasets: [{
                    label: '质量阈值上限 (或下限对差的)',
                    data: dataValues,
                    backgroundColor: backgroundColors,
                    borderColor: backgroundColors.map(color => color.replace('0.2', '1')),
                    borderWidth: 1
                }]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    x: {
                        beginAtZero: true,
                        title: { display: true, text: '度量值' }
                    }
                },
                plugins: {
                    title: { display: true, text: chartTitle, font: { size: 14 } },
                    legend: { display: false },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                let label = context.dataset.label || '';
                                if (label) {
                                    label += ': ';
                                }
                                if (context.parsed.x !== null) {
                                    if (metric.id === 'aspectRatio' || metric.id === 'skewness' || metric.id === 'warpage') {
                                        if (context.dataIndex === 0) label = `理想: ${context.parsed.x}`;
                                        else if (context.dataIndex === 1) label = `良好上限: ${context.parsed.x}`;
                                        else if (context.dataIndex === 2) label = `可接受上限: ${context.parsed.x}`;
                                        else label = `差的起点: > ${context.parsed.x}`;
                                    } else {
                                        if (context.dataIndex === 3) label = `理想: ${context.parsed.x}`;
                                        else if (context.dataIndex === 2) label = `良好下限: ${context.parsed.x}`;
                                        else if (context.dataIndex === 1) label = `可接受下限: ${context.parsed.x}`;
                                        else label = `差的上限: < ${context.parsed.x}`;
                                    }
                                }
                                return label;
                            }
                        }
                    }
                }
            }
        });
    }


    // Benchmark Chart
    const benchmarkMetricSelect = document.getElementById('benchmarkMetricSelect');
    benchmarkMetricSelect.addEventListener('change', (event) => {
        renderBenchmarkChart(event.target.value);
    });

    const benchmarkData = {
        aspectRatio: {
            labels: ['理想值', '通用 FEA (可接受)', '通用 CFD (可接受)'],
            datasets: [{
                label: '长宽比 (越接近1越好)',
                data: [1, 5, 5], // Ideal, FEA up to 5 (some 10), CFD up to 5 (higher in boundary layers)
                backgroundColor: ['#4ade80', '#60a5fa', '#2dd4bf'],
            }]
        },
        skewness: { // 0 is ideal
            labels: ['理想值', '通用 FEA (可接受)', '通用 CFD (可接受)'],
            datasets: [{
                label: '偏斜度 (越接近0越好)',
                data: [0, 0.75, 0.85], // Ideal 0, FEA up to 0.5-0.75, CFD < 0.85
                backgroundColor: ['#4ade80', '#60a5fa', '#2dd4bf'],
            }]
        },
        scaledJacobian: { // 1 is ideal
            labels: ['理想值', '通用 FEA (可接受 >)', '通用 CFD (可接受 >)'],
            datasets: [{
                label: '缩放雅可比 (越接近1越好)',
                data: [1, 0.5, 0.5], // Ideal 1, FEA/CFD > 0.5 or > 0.6
                backgroundColor: ['#4ade80', '#60a5fa', '#2dd4bf'],
            }]
        },
        orthogonalQuality: { // 1 is ideal
            labels: ['理想值', '通用 FEA (可接受 >)', '通用 CFD (目标 >)'],
            datasets: [{
                label: '正交质量 (越接近1越好)',
                data: [1, 0.2, 0.7], // Ideal 1, FEA > 0.1-0.2, CFD > 0.1 (often target >0.7)
                backgroundColor: ['#4ade80', '#60a5fa', '#2dd4bf'],
            }]
        }
    };

    function renderBenchmarkChart(metricId) {
        const ctx = document.getElementById('benchmarkChart').getContext('2d');
        if (currentBenchmarkChart) {
            currentBenchmarkChart.destroy();
        }
        currentBenchmarkChart = new Chart(ctx, {
            type: 'bar',
            data: benchmarkData[metricId],
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        title: { display: true, text: '度量值' }
                    },
                    x: {
                        ticks: {
                            callback: function(value, index, ticks) {
                                const label = this.getLabelForValue(value);
                                if (label.length > 16) {
                                    return label.substring(0, 16) + '...';
                                }
                                return label;
                            }
                        }
                    }
                },
                plugins: {
                    title: { display: true, text: benchmarkData[metricId].datasets[0].label, font: {size: 16} },
                    legend: { display: false },
                    tooltip: {
                        callbacks: {
                            title: function(tooltipItems) {
                                return benchmarkData[metricId].labels[tooltipItems[0].dataIndex];
                            }
                        }
                    }
                }
            }
        });
    }

    // Software Standards
    const softwareSelect = document.getElementById('softwareSelect');
    const softwareInfoDiv = document.getElementById('softwareInfo');
    const softwareData = {
        ansys: {
            name: "ANSYS (通用)",
            content: `
                <p><strong>重点关注的关键度量:</strong> 单元质量, 偏斜度, 正交质量, 雅可比比率。</p>
                <p><strong>典型可接受/目标范围 (六面体):</strong></p>
                <ul class="list-disc list-inside ml-4">
                    <li>偏斜度: &lt;0.8-0.95 (平均 &lt;0.5 良好)。ANSYS定义中，优秀 (0-0.25), 非常好 (0.25-0.50), 好 (0.50-0.80), 可接受 (0.80-0.94)。</li>
                    <li>正交质量 (0-1, 1为最佳): &gt;0.1-0.2 (平均 &gt;0.7 良好)。优秀 (0.95-1.00), 非常好 (0.70-0.95), 好 (0.20-0.69), 可接受 (0.10-0.20)。</li>
                    <li>雅可比比率: 理想值1.0；高质量网格中 &gt;90% 单元在 1-10 之间。</li>
                    <li>单元质量: 理想值1 (完美立方体/正方形)，0表示退化单元。</li>
                </ul>
                <p class="mt-2"><strong>质量控制的关键工具/特性:</strong> 网格质量工作表, 物理场偏好默认值, 多区域/扫掠网格划分。</p>
            `
        },
        abaqus: {
            name: "Abaqus",
            content: `
                <p><strong>重点关注的关键度量:</strong> 面角角度, 长宽比。</p>
                <p><strong>六面体推荐阈值 (默认限制):</strong></p>
                <ul class="list-disc list-inside ml-4">
                    <li>较小面角角度: &gt; 10 度。</li>
                    <li>较大面角角度: &lt; 160 度。</li>
                    <li>长宽比: &lt; 10。</li>
                </ul>
                <p class="mt-2"><strong>其他检查:</strong> 几何偏差因子, 稳定时间增量 (用于 Abaqus/Explicit)。</p>
                <p class="mt-2"><strong>雅可比:</strong> 文献表明，雅可比值 &gt; 0.2 更可取。</p>
                <p class="mt-2"><strong>质量控制的关键工具/特性:</strong> /CAE 中的网格验证工具。</p>
            `
        },
        comsol: {
            name: "COMSOL Multiphysics",
            content: `
                <p><strong>重点关注的关键度量:</strong> 偏斜度 (默认, 1=最佳), 通用质量 (0-1)。其他包括最大角、体积与外接球半径比等。</p>
                <p><strong>通用质量标度:</strong> 对于所有度量，1为最佳，0为退化。</p>
                <p><strong>低质量指示:</strong> 对于许多应用，质量 &lt; 0.1 通常被认为是差的。负的或接近零的质量表示单元反转/接近反转。</p>
                <p class="mt-2"><strong>六面体特定说明:</strong> 对于大长宽比单元（如边界层），偏斜度、最大角和增长率可能报告高质量，而体积与外接球半径比可能不会。需选择合适度量。</p>
                <p class="mt-2"><strong>质量控制的关键工具/特性:</strong> 网格统计, 网格图 (带单元过滤器)。</p>
            `
        },
        hypermesh: {
            name: "Altair HyperMesh",
            content: `
                <p><strong>重点关注的关键度量:</strong> 长宽比, 雅可比, 翘曲度, 偏斜度 (各种定义)。</p>
                <p><strong>推荐阈值 (示例):</strong></p>
                <ul class="list-disc list-inside ml-4">
                    <li>长宽比: 很少超过 5:1 (部分目标 3 或 4)。</li>
                    <li>雅可比 (0-1标度, 高斯点): &gt;= 0.7 通常可接受。</li>
                    <li>翘曲度 (度): 通常可接受高达 5 度 (部分目标 15 度)。</li>
                    <li>偏斜度 (度, HyperMesh-Alt): 示例目标 45 度。</li>
                </ul>
                <p class="mt-2"><strong>质量控制的关键工具/特性:</strong> 单元质量检查面板, 映射网格划分工具, HyperMorph。</p>
            `
        },
        cubit: {
            name: "Cubit (Sandia)",
            content: `
                <p><strong>重点关注的关键度量:</strong> 缩放雅可比, 偏斜度, 长宽比, 条件数。提供全面的度量列表。</p>
                <p><strong>典型可接受/目标范围:</strong></p>
                <ul class="list-disc list-inside ml-4">
                    <li>缩放雅可比: 0.5 - 1。</li>
                    <li>偏斜度 (0=理想): 0 - 0.5。</li>
                    <li>长宽比: 1 - 4。</li>
                    <li>条件数: 1 - 8。</li>
                </ul>
                <p class="mt-2"><strong>质量控制的关键工具/特性:</strong> 具有已定义范围的广泛度量列表。</p>
            `
        }
    };
    softwareSelect.addEventListener('change', (event) => {
        const selectedSoftware = softwareData[event.target.value];
        if (selectedSoftware) {
            softwareInfoDiv.innerHTML = `
                <h3 class="text-xl font-semibold text-sky-700 mb-3">${selectedSoftware.name}</h3>
                ${selectedSoftware.content}
            `;
        } else {
            softwareInfoDiv.innerHTML = '<p>请从上方选择一个软件以查看其相关的六面体网格质量建议。</p>';
        }
    });

    // Impact & Best Practices Accordions
    const accordionsData = [
        {
            title: "劣质网格对求解精度和可靠性的影响",
            content: "质量差的单元（高偏斜度、高长宽比、差的雅可比值）会导致更大的离散误差，使数值解与真实解偏差更大。扭曲单元导致梯度计算（如应力、热通量）不准确。在CFD中，高度偏斜的单元尤其成问题。非正交性会引入数值扩散。避免最差的单元至关重要。"
        },
        {
            title: "劣质网格对求解器收敛性和稳定性的影响",
            content: "形状差的单元会导致系统矩阵病态，使求解器难以收敛，可能表现为发散或迭代次数过多。反转单元（负雅可比值）将导致求解器立即失败。网格质量改进可以降低系统条件数，减少迭代次数。局部大残差区域通常与局部网格质量差有关。"
        },
        {
            title: "劣质网格与计算成本的关系",
            content: "过度精细或包含许多劣质单元的网格会不必要地增加计算时间和内存需求。六面体网格通常能以更少单元达到期望精度，从而降低总体成本。生成高质量六面体网格的前期投入可以通过更快、更可靠的求解阶段得到补偿。"
        },
        {
            title: "最佳实践：几何准备和清理",
            content: "从清洁CAD模型开始，移除不必要细节（小圆角、倒角等）、修复间隙和重叠。对分析目标不重要的特征进行简化。修复拓扑并确保部件正确连接。对于复杂几何体，策略性地将其分解为更简单、可扫掠或可映射的子域。"
        },
        {
            title: "最佳实践：策略性单元类型选择和网格划分方法",
            content: "在关键应用中优先选择六面体。对可拉伸几何体使用扫掠网格划分。多区域网格划分 (如Ansys) 可在复杂零件中生成结构化六面体。映射网格划分 (如HyperMesh) 功能强大但需专业知识。混合网格划分（六面体与四面体/棱柱体等结合）是一种务实方法。"
        },
        {
            title: "最佳实践：网格细化策略和自适应网格划分",
            content: "将网格细化集中在高梯度或关键特征区域。使用边尺寸控制实现平滑过渡（增长率约1.2）。自适应网格划分（如Ansys GPAD/NLAD, COMSOL）可根据解动态细化网格。进行网格收敛性研究以确保结果与网格尺寸无关。"
        },
        {
            title: "最佳实践：网格改进和优化技术",
            content: "使用平滑（如拉普拉斯平滑）重新定位节点以提高单元质量。基于优化的方法（如HexOpt, Cubit）使用质量度量作为目标函数来迭代改进单元形状，并防止反转。利用虚拟拓扑修改几何以改善网格可划分性。定期检查和修复问题区域。"
        }
    ];

    const accordionsContainer = document.getElementById('impactAccordions');
    accordionsData.forEach((item, index) => {
        const accordionItem = document.createElement('div');
        accordionItem.className = 'border border-stone-200 rounded-md';
        accordionItem.innerHTML = `
            <button class="w-full flex justify-between items-center text-left p-4 bg-stone-50 hover:bg-stone-100 focus:outline-none" onclick="toggleAccordion(${index})">
                <span class="font-medium text-neutral-700">${item.title}</span>
                <svg class="w-5 h-5 text-neutral-500 transform transition-transform duration-300" id="arrow-${index}" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
            </button>
            <div class="accordion-content px-4 pb-4 text-neutral-600" id="content-${index}">
                <p class="pt-3">${item.content}</p>
            </div>
        `;
        accordionsContainer.appendChild(accordionItem);
    });

    function toggleAccordion(index) {
        const content = document.getElementById(`content-${index}`);
        const arrow = document.getElementById(`arrow-${index}`);
        if (content.style.maxHeight && content.style.maxHeight !== "0px") {
            content.style.maxHeight = "0px";
            arrow.classList.remove("rotate-180");
        } else {
            content.style.maxHeight = content.scrollHeight + "px";
            arrow.classList.add("rotate-180");
        }
    }
    
    // Initialize first tab
    showTab('intro');

</script>
</body>
</html>
